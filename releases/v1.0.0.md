# Release v1.0.0 - CDK Common Library

## ðŸ“… Release Date: 2024-09-06

## ðŸŽ¯ Overview

Initial release of the CDK Common Library - reusable AWS CDK constructs for infrastructure as code.

## âœ¨ Features

### Core Constructs

- VPC configurations
- IAM roles, security groups, KMS keys
- EC2, ECS, Lambda, Batch constructs
- S3, EFS, EBS storage
- RDS, DynamoDB, ElastiCache

### Networking

- Multi-AZ VPC with public/private subnets
- VPC peering
- Transit Gateway
- PrivateLink endpoints
- Route 53 DNS

### Security

- IAM policy builder
- Secrets Manager and Parameter Store
- KMS encryption
- WAF rules

### Monitoring

- CloudWatch dashboards
- Alarms
- Log groups
- Metrics
- X-Ray tracing

### CI/CD

- CodePipeline and GitHub Actions
- CodeBuild projects
- Deployment stages
- Approval gates
- S3 and ECR artifacts

### Utilities

- Resource tagging
- Cost allocation
- Stack dependencies
- Environment configuration
- Input validation

## ðŸ”§ Technical Details

### Supported Services

- **Compute**: EC2, ECS, EKS, Lambda, Batch, Fargate
- **Storage**: S3, EFS, EBS, FSx, Storage Gateway
- **Database**: RDS, Aurora, DynamoDB, ElastiCache, Neptune
- **Networking**: VPC, ALB, NLB, API Gateway, CloudFront
- **Security**: IAM, KMS, Secrets Manager, WAF, Shield
- **Integration**: SQS, SNS, EventBridge, Step Functions
- **Analytics**: Kinesis, Glue, Athena, QuickSight

### Patterns

- Well-Architected Framework
- Microservices
- Serverless
- Data Lake
- Multi-Region

## ðŸ“¦ Installation

### Using This Library

#### Maven

Add this dependency to your project's `pom.xml`:

```xml
<dependency>
    <groupId>io.stxkxs</groupId>
    <artifactId>cdk-common</artifactId>
    <version>1.0.0</version>
</dependency>
```

**About the Package Naming**:

- `io.stxkxs` is the Maven group ID for this library
- This follows Java's reverse domain naming convention
- When forking or creating your own version, you would use your organization's group ID

#### If Published to GitHub Packages

1. Add authentication to your `~/.m2/settings.xml`:

```xml
<servers>
  <server>
    <id>github</id>
    <username>YOUR_GITHUB_USERNAME</username>
    <password>YOUR_GITHUB_TOKEN</password>
  </server>
</servers>
```

2. Add the repository to your `pom.xml`:

```xml
<repositories>
  <repository>
    <id>github</id>
    <url>https://maven.pkg.github.com/bs/cdk-common</url>
  </repository>
</repositories>
```

3. Use the same dependency coordinates:

```xml
<dependency>
    <groupId>io.stxkxs</groupId>
    <artifactId>cdk-common</artifactId>
    <version>1.0.0</version>
</dependency>
```

### Local Development

#### Building Locally

```bash
# Clone the repository
git clone https://github.com/bs/cdk-common.git
cd cdk-common

# Install to local Maven repository
mvn clean install

# Build without installing
mvn package
```

#### Testing Local Changes

After running `mvn clean install`, the library is available in your local Maven repository.

To use a local snapshot version in your project:

```xml
<dependency>
    <groupId>io.stxkxs</groupId>
    <artifactId>cdk-common</artifactId>
    <version>1.0.0-SNAPSHOT</version>
</dependency>
```

### Creating Your Own Fork

If you want to fork this library for your organization:

1. **Update the Maven coordinates** in `pom.xml`:

```xml
<groupId>com.yourcompany</groupId>  <!-- Your organization's group ID -->
<artifactId>cdk-common</artifactId>  <!-- Keep the same name or rename -->
<version>1.0.0</version>
```

2. **Why `io.stxkxs`?**
    - This is the author's chosen namespace
    - Similar to how Spring uses `org.springframework`
    - Or how Google uses `com.google`
    - You would replace this with your organization's group ID when forking

3. **Publishing Options**:
    - Maven Central: Follow [Sonatype's guide](https://central.sonatype.org/publish/publish-guide/)
    - GitHub Packages: Use GitHub Actions
    - Private Repository: Configure Nexus/Artifactory

## ðŸš€ Getting Started

### Example: Using This Library in Your CDK Project

After adding the dependency (see Installation above), import and use the constructs:

```java
// Import the constructs from this library
import io.stxkxs.execute.aws.vpc.NetworkNestedStack;
import io.stxkxs.model.aws.vpc.NetworkConf;
import software.amazon.awscdk.Stack;
import software.constructs.Construct;

public class MyInfrastructureStack extends Stack {
    public MyInfrastructureStack(final Construct scope, final String id) {
        super(scope, id);
        
        // Example: Create a network stack
        NetworkNestedStack network = new NetworkNestedStack(this, "Network", 
            NetworkConf.builder()
                // Configure your network settings
                .build());
    }
}
```

### Understanding the Package Structure

This library uses the package structure `io.stxkxs` throughout. The main packages are:

- `io.stxkxs.execute.aws.*` - CDK construct implementations
- `io.stxkxs.model.*` - Configuration models and data structures
- `io.stxkxs.execute.serialization` - Serialization utilities

When importing, you'll use:

```java
import io.stxkxs.execute.aws.vpc.NetworkNestedStack;
import io.stxkxs.execute.aws.synthesizer.SynthesizerNestedStack;
import io.stxkxs.model.aws.codebuild.Pipeline;
// etc.
```

## ðŸ”„ Migration Guide

For teams migrating from inline CDK code to this library:

1. Identify common patterns in existing code
2. Map to library constructs
3. Replace inline code with library imports
4. Deploy to non-production first

## ðŸ”§ Troubleshooting

### Common Installation Issues

#### Dependency Not Found

```
[ERROR] Failed to execute goal: Could not resolve dependencies for project
```

**Solution**: Ensure you're using `io.stxkxs` as the groupId and `cdk-common` as the artifactId.

#### Authentication Failed (GitHub Packages)

```
[ERROR] Failed to authenticate with GitHub Packages
```

**Solution**:

1. Generate a GitHub Personal Access Token with `read:packages` scope
2. Update `~/.m2/settings.xml` with correct credentials
3. Ensure the token has access to the repository

#### Version Conflicts

```
[ERROR] Dependency convergence error
```

**Solution**: Use Maven's dependency management to enforce versions:

```xml
<dependencyManagement>
    <dependencies>
        <dependency>
            <groupId>io.stxkxs</groupId>
            <artifactId>cdk-common</artifactId>
            <version>1.0.0</version>
        </dependency>
    </dependencies>
</dependencyManagement>
```

#### Local Development Issues

- **Build Fails**: Ensure Java 11+ and Maven 3.6+ are installed
- **Import Errors**: Ensure you're importing from `io.stxkxs.*` packages

## ðŸ“š Documentation

- See [README.md](../README.md) for detailed setup instructions
- See [USAGE.md](../USAGE.md) for usage examples
- See [CONTRIBUTING.md](../CONTRIBUTING.md) for contribution guidelines
- See [LOCAL_VALIDATION.md](../LOCAL_VALIDATION.md) for local testing guide
- See [RELEASE_GUIDE.md](../RELEASE_GUIDE.md) for publishing your own version

---

**Full Changelog**: This is the first release